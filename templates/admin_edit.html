{% extends "layout.html" %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card shadow-sm">
      <div class="card-body">
        <h3>Editar inscripción #{{ row[0] }}</h3>
        <form method="post" class="needs-validation" novalidate>
          <div class="row g-2">
            <div class="col-md-6">
              <label class="form-label">Nombre</label>
              <input name="nombre" value="{{ row[1] }}" class="form-control" required pattern="[A-Za-zÀ-ÖØ-öø-ÿ '\-]{2,60}" maxlength="60">
              <div class="invalid-feedback">Nombre inválido (2-60 letras).</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Apellido</label>
              <input name="apellido" value="{{ row[2] }}" class="form-control" required pattern="[A-Za-zÀ-ÖØ-öø-ÿ '\-]{2,60}" maxlength="60">
              <div class="invalid-feedback">Apellido inválido (2-60 letras).</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">ID (RUT o pasaporte)</label>
              <input name="identificacion" value="{{ row[3] }}" class="form-control" maxlength="50">
            </div>
            <div class="col-md-6">
              <label class="form-label">Teléfono</label>
              <input name="telefono" value="{{ row[4] }}" class="form-control" required pattern="[0-9+()\- ]{8,20}" maxlength="20">
              <div class="invalid-feedback">Teléfono inválido.</div>
            </div>
            <div class="col-12">
              <label class="form-label">Dirección</label>
              <input name="direccion" value="{{ row[5] }}" class="form-control" maxlength="200">
            </div>
            <div class="col-md-6">
              <label class="form-label">Correo electrónico</label>
              <input name="email" value="{{ row[6] }}" class="form-control" required type="email" maxlength="254">
              <div class="invalid-feedback">Correo inválido.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Experiencia</label>
              <input name="experiencia" value="{{ row[7] }}" class="form-control" maxlength="60">
            </div>
            <div class="col-12">
              <label class="form-label">Mensaje</label>
              <textarea name="mensaje" class="form-control" rows="3" maxlength="1000">{{ row[8] }}</textarea>
              <div class="form-text text-end small" id="msg-count-edit">{{ row[8]|length }} / 1000</div>
            </div>
          </div>
          <div class="mt-3">
            <button class="btn btn-primary" type="submit">Guardar</button>
            <a class="btn btn-secondary" href="/admin">Cancelar</a>
          </div>
        </form>
      </div>
    </div>
  </div>
      </div>
    </div>
  </div>
</div>
<script>
// Bootstrap-style client-side validation
(function () {
  'use strict'
  var forms = document.querySelectorAll('.needs-validation')
  Array.prototype.slice.call(forms).forEach(function (form) {
    form.addEventListener('submit', function (event) {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }
      form.classList.add('was-validated')
    }, false)
  })

  // message counter for textarea
  var ta = document.querySelector('textarea[name="mensaje"]')
  var counter = document.getElementById('msg-count-edit')
  if (ta && counter) {
    ta.addEventListener('input', function () {
      counter.textContent = ta.value.length + ' / 1000'
    })
  }
})()
</script>
{% endblock %}
