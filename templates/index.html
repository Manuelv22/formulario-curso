{% extends "layout.html" %}

{% block content %}
<section class="hero hero-bg p-5 rounded-4 text-white mb-4">
  <div class="row align-items-center">
    <div class="col-lg-7">
      <h1 class="display-6 fw-bold">Negocio de paños inmobiliarios</h1>
      <p class="lead">Te enseñamos a evaluarlo y afrontar un paño para proyecto de vivienda.</p>
      <a class="btn btn-light btn-lg me-2" href="#formulario">Inscribirme</a>
      <a class="btn btn-success btn-lg" href="https://wa.me/56984575115?text=Quiero+inscribirme+al+curso+de+pa%C3%B1os+inmobiliarios" target="_blank">WhatsApp</a>
    </div>
    <div class="col-lg-5 text-center d-none d-lg-block">
      
    </div>
  </div>
</section>

<section id="info" class="mb-5">
  <div class="row g-4 align-items-start">
    <!-- Info card: keep first in DOM so it appears first on mobile, but move to right on md+ -->
    <div class="col-12 col-md-5 order-1 order-md-2">
      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <h3 class="card-title">¿Qué aprenderás?</h3>
          <p>Evaluar paños inmobiliarios, técnicas para planificar proyectos de vivienda, y casos prácticos. Taller con ejemplos aplicables al mercado chileno.</p>
          <h4>Detalles rápidos</h4>
          <p class="text-muted">Evento presencial, cupo limitado. Trae tus preguntas y gana experiencia práctica.</p>
          <a class="btn btn-outline-light" href="#formulario">Reservar cupo</a>
        </div>
      </div>
      <!-- Contact (desktop) placed in same right column on md+ -->
      <div class="d-none d-md-block">
        <div class="card shadow-sm">
          <div class="card-body">
            <h4>Contacto</h4>
            <p><strong>Dirección:</strong> Suecia 0155 oficina 201, Providencia</p>
            <p><strong>Fecha:</strong> 10 de diciembre — 18:30</p>
            <p><strong>Cupo:</strong> 30 personas — gratuito</p>
            <a class="btn btn-outline-primary" href="https://wa.me/56984575115?text=Consulta+sobre+el+curso">Contactar por WhatsApp</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Form: shown left on md+ -->
    <div class="col-12 col-md-7 order-2 order-md-1" id="formulario">
      <div class="card shadow-sm">
        <div class="card-body">
          <h3 class="mb-3">Formulario de inscripción</h3>
          {% if registrations_limit is not none %}
            {% set remaining = registrations_limit - registrations_count %}
            {% if registrations_count >= registrations_limit %}
              <div class="alert alert-warning" role="alert">
                Lo sentimos — ya se alcanzó el límite de {{ registrations_limit }} inscripciones. No se aceptan más inscripciones por ahora.
              </div>
              <p class="text-muted">Si quieres, contáctanos por WhatsApp para preguntar por lista de espera.</p>
              <a class="btn btn-outline-primary" href="https://wa.me/56984575115?text=Consulta+sobre+lista+de_espera+curso+pa%C3%B1os+inmobiliarios">Contactar por WhatsApp</a>
            {% else %}
              <div id="form-errors"></div>
              <form id="inscripcionForm" method="post" novalidate>
          {% endif %}
          {% else %}
            {# No registration limit configured: show form normally #}
            <div id="form-errors"></div>
            <form id="inscripcionForm" method="post" novalidate>
          {% endif %}
            <div class="row g-2">
              <div class="col-md-6">
                <label class="form-label">Nombre</label>
                <div class="input-group">
                  <input name="nombre" id="nombre" class="form-control" required pattern="[A-Za-zÀ-ÖØ-öø-ÿ '\-]{2,60}" maxlength="60">
                  <span class="input-group-text field-status" id="status-nombre"><i class="bi"></i></span>
                </div>
                <div class="invalid-feedback" id="err-nombre"></div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Apellido</label>
                <div class="input-group">
                  <input name="apellido" id="apellido" class="form-control" required pattern="[A-Za-zÀ-ÖØ-öø-ÿ '\-]{2,60}" maxlength="60">
                  <span class="input-group-text field-status" id="status-apellido"><i class="bi"></i></span>
                </div>
                <div class="invalid-feedback" id="err-apellido"></div>
              </div>
              <div class="col-md-6">
                <label class="form-label">ID (RUT o pasaporte)</label>
                <div class="input-group">
                  <input name="identificacion" id="identificacion" class="form-control" maxlength="50">
                  <span class="input-group-text field-status" id="status-identificacion"><i class="bi"></i></span>
                </div>
                <div class="invalid-feedback" id="err-identificacion"></div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Teléfono</label>
                <div class="input-group">
                  <input name="telefono" id="telefono" type="tel" class="form-control" required pattern="[0-9+()\- ]{8,20}" maxlength="20">
                  <span class="input-group-text field-status" id="status-telefono"><i class="bi"></i></span>
                </div>
                <div class="invalid-feedback" id="err-telefono"></div>
              </div>
              <div class="col-12">
                <label class="form-label">Dirección</label>
                <div class="input-group">
                  <!-- Dirección removed from public form per request -->
                </div>
                <div class="invalid-feedback" id="err-direccion"></div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Correo electrónico</label>
                <div class="input-group">
                  <!-- Email removed from public form per request -->
                </div>
                <div class="invalid-feedback" id="err-email"></div>
              </div>
              <div class="col-md-6">
                <label class="form-label">¿Tienes experiencia en paños inmobiliarios?</label>
                <select name="experiencia" class="form-select">
                  <option value="No">No</option>
                  <option value="Sí">Sí</option>
                </select>
              </div>
              <div class="col-12">
                <label class="form-label">Mensaje</label>
                <div class="input-group">
                  <textarea name="mensaje" id="mensaje" class="form-control" rows="3" maxlength="1000"></textarea>
                  <span class="input-group-text field-status" id="status-mensaje"><i class="bi"></i></span>
                </div>
                <div class="form-text text-end small" id="msg-count">0 / 1000</div>
                <div class="invalid-feedback" id="err-mensaje"></div>
              </div>
            </div>
            <div class="mt-3">
              <button id="submitBtn" class="btn btn-primary btn-lg" type="submit">Enviar inscripción</button>
            </div>
          </form>
          {% if registrations_limit is not none %}
            <div class="mt-3 text-muted">Quedan <strong>{{ remaining }}</strong> cupos disponibles.</div>
          {% endif %}
          
        </div>
      </div>
      <!-- Contact (mobile) placed after the form on small screens -->
      <div class="d-block d-md-none mt-3">
        <div class="card shadow-sm">
          <div class="card-body">
            <h4>Contacto</h4>
            <p><strong>Dirección:</strong> Suecia 0155 oficina 201, Providencia</p>
            <p><strong>Fecha:</strong> 10 de diciembre — 18:30</p>
            <p><strong>Cupo:</strong> 30 personas — gratuito</p>
            <a class="btn btn-outline-primary" href="https://wa.me/56984575115?text=Consulta+sobre+el+curso">Contactar por WhatsApp</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>



{% endblock %}
